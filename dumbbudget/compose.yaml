services:
    ts-dumbbudget:
        image: tailscale/tailscale:latest
        container_name: ts-dumbbudget
        hostname: dumbbudget
        environment:
            - TS_AUTHKEY=$TS_AUTHKEY
            - TS_STATE_DIR=/var/lib/tailscale
            - TS_USERSPACE=false
            - TS_SERVE_CONFIG=/config/serve-config.json
        volumes:
            - ./data/ts-dumbbudget/state:/var/lib/tailscale
            - ./data/ts-dumbbudget/config:/config
        devices:
            - /dev/net/tun:/dev/net/tun
        cap_add:
            - net_admin
        restart: unless-stopped
    dumbbudget:
        image: dumbwareio/dumbbudget:latest
        container_name: dumbbudget
        network_mode: service:ts-dumbbudget
        depends_on:
            - ts-dumbbudget
        environment:
            - DUMBBUDGET_PIN=
            - CURRENCY=EUR
            - BASE_URL=https://dumbbudget.duckbill-karat.ts.net
        volumes:
            - ./data/dumbbudget:/app/data
        restart: unless-stopped
